{"version":3,"sources":["../../../../src/app/page.tsx","../../../../src/components/Header.tsx","../../../../src/components/ChatInterface.tsx","../../../../src/components/ProductResult.tsx","../../../../src/lib/helpers.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport Header from '../components/Header';\r\nimport ChatInterface from '../components/ChatInterface';\r\nimport ProductResult from '../components/ProductResult';\r\nimport { ConversationStep, ProductData } from '../types';\r\nimport {\r\n    splitInputList,\r\n    parseStockQuantity,\r\n    mapStatusAnswer,\r\n    parseShippingDetails,\r\n    parseAttributesInput,\r\n    normalizeProductResult\r\n} from '../lib/helpers';\r\n\r\nconst stepSequence: ConversationStep[] = [\r\n    'name',\r\n    'price',\r\n    'shortDescription',\r\n    'longDescription',\r\n    'category',\r\n    'tags',\r\n    'images',\r\n    'stock',\r\n    'sku',\r\n    'status',\r\n    'productType',\r\n    'shipping',\r\n    'attributes',\r\n    'complete',\r\n];\r\n\r\nconst questions: Record<Exclude<ConversationStep, 'complete'>, string> = {\r\n    name: '¿Cuál es el título del producto?',\r\n    price: '¿Cuál es el precio?',\r\n    shortDescription: 'Dame una descripción corta.',\r\n    longDescription: 'Ahora una descripción más completa.',\r\n    category: '¿En qué categoría lo metemos?',\r\n    tags: '¿Quieres añadir etiquetas?',\r\n    images: '¿Qué imágenes quieres usar? (URL o generar con IA)',\r\n    stock: '¿Cuánto stock tiene?',\r\n    sku: '¿Cuál es el SKU?',\r\n    status: '¿Publicamos el producto o lo dejamos como borrador?',\r\n    productType: '¿Qué tipo de producto es? (simple por defecto)',\r\n    shipping: 'Dame detalles de envío: peso y dimensiones',\r\n    attributes: '¿Tiene atributos como color, talla o material?',\r\n};\r\n\r\nconst initialProductData: ProductData = {\r\n    name: '',\r\n    price: '',\r\n    shortDescription: '',\r\n    longDescription: '',\r\n    category: '',\r\n    tags: '',\r\n    images: '',\r\n    stock: '',\r\n    sku: '',\r\n    status: '',\r\n    productType: '',\r\n    shippingDetails: '',\r\n    attributes: '',\r\n};\r\n\r\nconst initialMessage = 'Voy a ayudarte a crear un producto nuevo. Empecemos por lo básico. ¿Cuál es el título del producto?';\r\n\r\nexport default function Home() {\r\n    const [input, setInput] = useState('');\r\n    const [currentStep, setCurrentStep] = useState<ConversationStep>('name');\r\n    const [currentMessage, setCurrentMessage] = useState(initialMessage);\r\n    const [productData, setProductData] = useState<ProductData>(initialProductData);\r\n    const [loading, setLoading] = useState(false);\r\n    const [result, setResult] = useState<any>(null);\r\n    const [error, setError] = useState('');\r\n    const [uploading, setUploading] = useState(false);\r\n    const [uploadSuccess, setUploadSuccess] = useState('');\r\n\r\n    const getNextStep = (current: ConversationStep): ConversationStep => {\r\n        const index = stepSequence.indexOf(current);\r\n        return stepSequence[index + 1] || 'complete';\r\n    };\r\n\r\n    const proceedToStep = async (nextStep: ConversationStep, dataSnapshot: ProductData) => {\r\n        if (nextStep === 'complete') {\r\n            setCurrentMessage('¡Perfecto! Estoy generando tu producto con toda la información...');\r\n            setLoading(true);\r\n            await generateProduct(dataSnapshot);\r\n        } else {\r\n            setCurrentStep(nextStep);\r\n            setCurrentMessage(questions[nextStep]);\r\n        }\r\n    };\r\n\r\n    const handleSendMessage = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (loading) return;\r\n        const userMessage = input.trim();\r\n        if (!userMessage) return;\r\n        setInput('');\r\n\r\n        const newProductData = { ...productData };\r\n        switch (currentStep) {\r\n            case 'name':\r\n                newProductData.name = userMessage;\r\n                break;\r\n            case 'price':\r\n                newProductData.price = userMessage;\r\n                break;\r\n            case 'shortDescription':\r\n                newProductData.shortDescription = userMessage;\r\n                break;\r\n            case 'longDescription':\r\n                newProductData.longDescription = userMessage;\r\n                break;\r\n            case 'category':\r\n                newProductData.category = userMessage;\r\n                break;\r\n            case 'tags':\r\n                newProductData.tags = userMessage;\r\n                break;\r\n            case 'images':\r\n                newProductData.images = userMessage;\r\n                break;\r\n            case 'stock':\r\n                newProductData.stock = userMessage;\r\n                break;\r\n            case 'sku':\r\n                newProductData.sku = userMessage;\r\n                break;\r\n            case 'status':\r\n                newProductData.status = userMessage;\r\n                break;\r\n            case 'productType':\r\n                newProductData.productType = userMessage;\r\n                break;\r\n            case 'shipping':\r\n                newProductData.shippingDetails = userMessage;\r\n                break;\r\n            case 'attributes':\r\n                newProductData.attributes = userMessage;\r\n                break;\r\n        }\r\n        setProductData(newProductData);\r\n\r\n        const nextStep = getNextStep(currentStep);\r\n        await proceedToStep(nextStep, newProductData);\r\n    };\r\n\r\n    const handleSkip = async () => {\r\n        if (loading || currentStep === 'complete') return;\r\n        const nextStep = getNextStep(currentStep);\r\n        setInput('');\r\n        await proceedToStep(nextStep, productData);\r\n    };\r\n\r\n    const generateProduct = async (data: ProductData) => {\r\n        setError('');\r\n        setResult(null);\r\n        setUploadSuccess('');\r\n\r\n        try {\r\n            const categoriesList = splitInputList(data.category, { allowHierarchy: true });\r\n            const tagsList = splitInputList(data.tags);\r\n            let imagesList = splitInputList(data.images);\r\n            const stockQuantity = parseStockQuantity(data.stock);\r\n            const normalizedStatus = mapStatusAnswer(data.status);\r\n            const normalizedType = data.productType.trim().toLowerCase() || 'simple';\r\n            const shipping = parseShippingDetails(data.shippingDetails);\r\n            const attributesList = parseAttributesInput(data.attributes);\r\n            const wantsAiImages = data.images.toLowerCase().includes('generar');\r\n\r\n            if (wantsAiImages) {\r\n                imagesList = [];\r\n            }\r\n\r\n            const promptLines = [\r\n                `Título sugerido: ${data.name || 'N/D'}`,\r\n                `Precio indicado: ${data.price || 'N/D'}`,\r\n                `Descripción corta: ${data.shortDescription || 'N/D'}`,\r\n                `Descripción completa: ${data.longDescription || 'N/D'}`,\r\n                `Categorías propuestas: ${categoriesList.length ? categoriesList.join(' | ') : data.category || 'N/D'}`,\r\n                `Etiquetas sugeridas: ${tagsList.length ? tagsList.join(', ') : data.tags || 'N/D'}`,\r\n                `Imágenes proporcionadas: ${wantsAiImages ? 'El usuario prefiere generarlas con IA.' : imagesList.length ? imagesList.join(', ') : data.images || 'N/D'}`,\r\n                `Stock indicado: ${data.stock || 'N/D'}`,\r\n                `SKU indicado: ${data.sku || 'N/D'}`,\r\n                `Estado deseado: ${normalizedStatus || data.status || 'N/D'}`,\r\n                `Tipo de producto: ${data.productType || 'simple'}`,\r\n                `Detalles de envío: ${data.shippingDetails || 'N/D'}`,\r\n                `Atributos sugeridos: ${data.attributes || 'N/D'}`,\r\n            ];\r\n\r\n            const prompt = promptLines.join('\\n');\r\n\r\n            const overridesPayload: Record<string, unknown> = {};\r\n\r\n            if (data.name.trim()) overridesPayload.name = data.name.trim();\r\n            if (data.shortDescription.trim()) overridesPayload.short_description = data.shortDescription.trim();\r\n            if (data.longDescription.trim()) overridesPayload.description = data.longDescription.trim();\r\n            if (data.price.trim()) overridesPayload.regular_price = data.price.trim();\r\n            if (categoriesList.length) overridesPayload.categories = categoriesList;\r\n            if (tagsList.length) overridesPayload.tags = tagsList;\r\n            if (imagesList.length) overridesPayload.images = imagesList;\r\n            if (typeof stockQuantity === 'number') overridesPayload.stock_quantity = stockQuantity;\r\n            if (data.sku.trim()) overridesPayload.sku = data.sku.trim();\r\n            if (normalizedStatus) overridesPayload.status = normalizedStatus;\r\n            if (normalizedType) overridesPayload.type = normalizedType;\r\n            if (shipping.weight) overridesPayload.weight = shipping.weight;\r\n            if (shipping.dimensions) overridesPayload.dimensions = shipping.dimensions;\r\n            if (attributesList.length) overridesPayload.attributes = attributesList;\r\n\r\n            const response = await fetch('/api/generate', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    text: prompt,\r\n                    overrides: overridesPayload,\r\n                }),\r\n            });\r\n\r\n            if (!response.ok) throw new Error('Failed to generate product');\r\n\r\n            const resultData = await response.json();\r\n            const normalizedResult = normalizeProductResult(resultData);\r\n\r\n            setResult(normalizedResult);\r\n            setCurrentMessage(`✅ ¡Producto generado exitosamente! \"${normalizedResult.product.name}\" está listo.`);\r\n            setCurrentStep('complete');\r\n        } catch (err) {\r\n            setError('Ocurrió un error al generar el producto. Por favor, inténtalo de nuevo.');\r\n            setCurrentMessage('❌ Lo siento, hubo un error al generar el producto. Recarga la página para intentarlo de nuevo.');\r\n            console.error(err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const downloadCSV = () => {\r\n        if (!result?.csv) return;\r\n        const blob = new Blob([result.csv], { type: 'text/csv' });\r\n        const url = window.URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = 'products.csv';\r\n        a.click();\r\n    };\r\n\r\n    const handleUpload = async () => {\r\n        if (!result?.product) return;\r\n        setUploading(true);\r\n        setUploadSuccess('');\r\n        setError('');\r\n\r\n        try {\r\n            const response = await fetch('/api/upload', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ product: result.product }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to upload product');\r\n            }\r\n\r\n            setUploadSuccess('¡Producto subido a WooCommerce con éxito!');\r\n        } catch (err: any) {\r\n            setError(err.message || 'Error al subir el producto');\r\n        } finally {\r\n            setUploading(false);\r\n        }\r\n    };\r\n\r\n    const resetChat = () => {\r\n        setCurrentMessage(initialMessage);\r\n        setCurrentStep('name');\r\n        setProductData(initialProductData);\r\n        setResult(null);\r\n        setError('');\r\n        setUploadSuccess('');\r\n        setInput('');\r\n    };\r\n\r\n    return (\r\n        <main className=\"chat-container\">\r\n            <div className=\"chat-wrapper\">\r\n                <Header />\r\n\r\n                <div className=\"chat-content\">\r\n                    <ChatInterface\r\n                        loading={loading}\r\n                        currentMessage={currentMessage}\r\n                        currentStep={currentStep}\r\n                        input={input}\r\n                        setInput={setInput}\r\n                        handleSendMessage={handleSendMessage}\r\n                        handleSkip={handleSkip}\r\n                        error={error}\r\n                        uploadSuccess={uploadSuccess}\r\n                    />\r\n\r\n                    {result && currentStep === 'complete' && (\r\n                        <ProductResult\r\n                            result={result}\r\n                            downloadCSV={downloadCSV}\r\n                            handleUpload={handleUpload}\r\n                            resetChat={resetChat}\r\n                            uploading={uploading}\r\n                        />\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </main>\r\n    );\r\n}\r\n","export default function Header() {\r\n    return (\r\n        <header className=\"chat-header\">\r\n            <h1 className=\"chat-title\">AI WooCommerce Uploader</h1>\r\n            <p className=\"chat-subtitle\">Crea productos con inteligencia artificial</p>\r\n        </header>\r\n    );\r\n}\r\n","import { ConversationStep } from '../types';\r\n\r\ninterface ChatInterfaceProps {\r\n    loading: boolean;\r\n    currentMessage: string;\r\n    currentStep: ConversationStep;\r\n    input: string;\r\n    setInput: (value: string) => void;\r\n    handleSendMessage: (e: React.FormEvent) => void;\r\n    handleSkip: () => void;\r\n    error: string;\r\n    uploadSuccess: string;\r\n}\r\n\r\nexport default function ChatInterface({\r\n    loading,\r\n    currentMessage,\r\n    currentStep,\r\n    input,\r\n    setInput,\r\n    handleSendMessage,\r\n    handleSkip,\r\n    error,\r\n    uploadSuccess,\r\n}: ChatInterfaceProps) {\r\n    return (\r\n        <>\r\n            <div className=\"ai-message\">\r\n                <div className=\"message-bubble\">\r\n                    {loading && (\r\n                        <div className=\"loading-dots\">\r\n                            <span></span>\r\n                            <span></span>\r\n                            <span></span>\r\n                        </div>\r\n                    )}\r\n                    <p>{currentMessage}</p>\r\n                </div>\r\n            </div>\r\n\r\n            {currentStep !== 'complete' && (\r\n                <>\r\n                    <form onSubmit={handleSendMessage} className=\"chat-input-form\">\r\n                        <div className=\"input-container\">\r\n                            <input\r\n                                type=\"text\"\r\n                                value={input}\r\n                                onChange={(e) => setInput(e.target.value)}\r\n                                placeholder=\"Escribe tu respuesta...\"\r\n                                className=\"chat-input\"\r\n                                disabled={loading}\r\n                                autoFocus\r\n                            />\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={loading || !input.trim()}\r\n                                className=\"send-button\"\r\n                                aria-label=\"Enviar\"\r\n                            >\r\n                                <svg className=\"icon-send\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\" />\r\n                                </svg>\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n                    <button\r\n                        type=\"button\"\r\n                        className=\"skip-button\"\r\n                        onClick={handleSkip}\r\n                        disabled={loading}\r\n                    >\r\n                        Saltar este paso\r\n                    </button>\r\n                </>\r\n            )}\r\n\r\n            {error && (\r\n                <div className=\"alert alert-error\">\r\n                    <svg className=\"icon-alert\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                    </svg>\r\n                    <p>{error}</p>\r\n                </div>\r\n            )}\r\n\r\n            {uploadSuccess && (\r\n                <div className=\"alert alert-success\">\r\n                    <svg className=\"icon-alert\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                    </svg>\r\n                    <p>{uploadSuccess}</p>\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n","import { ProductStatus } from '../types';\r\n\r\ninterface ProductResultProps {\r\n    result: any;\r\n    downloadCSV: () => void;\r\n    handleUpload: () => void;\r\n    resetChat: () => void;\r\n    uploading: boolean;\r\n}\r\n\r\nconst statusLabels: Record<ProductStatus, string> = {\r\n    publish: 'Publicado',\r\n    draft: 'Borrador',\r\n    pending: 'Pendiente',\r\n    private: 'Privado',\r\n};\r\n\r\nexport default function ProductResult({\r\n    result,\r\n    downloadCSV,\r\n    handleUpload,\r\n    resetChat,\r\n    uploading,\r\n}: ProductResultProps) {\r\n    const productResult = result?.product;\r\n    if (!productResult) return null;\r\n\r\n    const normalizedTags = productResult?.tags ?? [];\r\n    const normalizedCategories = productResult?.categories ?? [];\r\n    const normalizedImages = productResult?.images ?? [];\r\n    const statusLabel = productResult?.status ? statusLabels[productResult.status as ProductStatus] ?? productResult.status : null;\r\n    const hasDimensions = Boolean(productResult?.dimensions && (productResult.dimensions.length || productResult.dimensions.width || productResult.dimensions.height));\r\n\r\n    return (\r\n        <div className=\"product-result\">\r\n            <div className=\"product-header\">\r\n                <svg className=\"icon-product\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                </svg>\r\n                <h3>Producto Generado</h3>\r\n            </div>\r\n\r\n            <div className=\"product-details\">\r\n                <div className=\"product-name\">\r\n                    <span className=\"label\">Nombre</span>\r\n                    <span className=\"value\">{productResult.name}</span>\r\n                </div>\r\n\r\n                <div className=\"product-info-grid\">\r\n                    <div className=\"info-item\">\r\n                        <span className=\"label\">Precio</span>\r\n                        <div className=\"price\">\r\n                            <span className=\"value\">{productResult.regular_price}</span>\r\n                            <span className=\"currency\">EUR</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"info-item\">\r\n                        <span className=\"label\">Categorías</span>\r\n                        <div className=\"categories\">\r\n                            {normalizedCategories.length > 0\r\n                                ? normalizedCategories.map((cat: string, i: number) => (\r\n                                    <span key={i} className=\"category-tag\">{cat}</span>\r\n                                ))\r\n                                : <span className=\"value\">Sin categorías</span>}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"info-item\">\r\n                        <span className=\"label\">Etiquetas</span>\r\n                        <div className=\"categories\">\r\n                            {normalizedTags.length > 0\r\n                                ? normalizedTags.map((tag: string, i: number) => (\r\n                                    <span key={i} className=\"category-tag\">{tag}</span>\r\n                                ))\r\n                                : <span className=\"value\">Sin etiquetas</span>}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"info-item\">\r\n                        <span className=\"label\">Stock</span>\r\n                        <span className=\"value\">{productResult.stock_quantity ?? 'N/D'}</span>\r\n                    </div>\r\n\r\n                    <div className=\"info-item\">\r\n                        <span className=\"label\">SKU</span>\r\n                        <span className=\"value\">{productResult.sku || 'N/D'}</span>\r\n                    </div>\r\n\r\n                    <div className=\"info-item\">\r\n                        <span className=\"label\">Estado</span>\r\n                        <span className=\"value\">{statusLabel || 'N/D'}</span>\r\n                    </div>\r\n\r\n                    <div className=\"info-item\">\r\n                        <span className=\"label\">Tipo</span>\r\n                        <span className=\"value\">{productResult.type || 'simple'}</span>\r\n                    </div>\r\n\r\n                    <div className=\"info-item\">\r\n                        <span className=\"label\">Peso</span>\r\n                        <span className=\"value\">{productResult.weight || 'N/D'}</span>\r\n                    </div>\r\n\r\n                    <div className=\"info-item\">\r\n                        <span className=\"label\">Dimensiones</span>\r\n                        <span className=\"value\">\r\n                            {hasDimensions\r\n                                ? [\r\n                                    productResult.dimensions?.length,\r\n                                    productResult.dimensions?.width,\r\n                                    productResult.dimensions?.height,\r\n                                ]\r\n                                    .filter((segment) => segment)\r\n                                    .join(' x ')\r\n                                : 'N/D'}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                {productResult.attributes && productResult.attributes.length > 0 && (\r\n                    <div className=\"info-item\">\r\n                        <span className=\"label\">Atributos</span>\r\n                        <div className=\"attributes\">\r\n                            {productResult.attributes.map((attr: any, i: number) => (\r\n                                <div key={i} className=\"attribute-tag\">\r\n                                    <span className=\"attr-name\">{attr.name}:</span>\r\n                                    <span className=\"attr-value\">{attr.value}</span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {normalizedImages.length > 0 && (\r\n                    <div className=\"info-item\">\r\n                        <span className=\"label\">Imágenes</span>\r\n                        <div className=\"images-list\">\r\n                            {normalizedImages.map((img: string, index: number) => (\r\n                                <a\r\n                                    key={img}\r\n                                    href={img}\r\n                                    target=\"_blank\"\r\n                                    rel=\"noopener noreferrer\"\r\n                                    className=\"image-link\"\r\n                                >\r\n                                    Imagen {index + 1}\r\n                                </a>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"action-buttons\">\r\n                <button onClick={downloadCSV} className=\"btn btn-secondary\">\r\n                    <svg className=\"btn-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10\" />\r\n                    </svg>\r\n                    <span>Descargar CSV</span>\r\n                </button>\r\n\r\n                <button\r\n                    onClick={handleUpload}\r\n                    disabled={uploading}\r\n                    className=\"btn btn-primary\"\r\n                >\r\n                    {uploading ? (\r\n                        <>\r\n                            <svg className=\"btn-icon animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                            </svg>\r\n                            <span>Subiendo...</span>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <svg className=\"btn-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\r\n                            </svg>\r\n                            <span>Subir a WooCommerce</span>\r\n                        </>\r\n                    )}\r\n                </button>\r\n\r\n                <button onClick={resetChat} className=\"btn btn-secondary\">\r\n                    <svg className=\"btn-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\r\n                    </svg>\r\n                    <span>Nuevo Producto</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import { AttributeOverride, ProductStatus, ShippingInfo, ShippingDimensions, SplitOptions } from '../types';\r\n\r\nexport const splitInputList = (value: string, options: SplitOptions = {}): string[] => {\r\n    if (!value) return [];\r\n    const parts = value\r\n        .split(/[\\n,]+/)\r\n        .flatMap((part) => (options.allowHierarchy ? part.split('>') : [part]))\r\n        .map((item) => item.trim())\r\n        .filter((item) => item.length > 0);\r\n\r\n    return Array.from(new Set(parts));\r\n};\r\n\r\nexport const parseStockQuantity = (value: string): number | undefined => {\r\n    if (!value) return undefined;\r\n    const normalized = value.replace(/[^0-9.,-]/g, '').replace(',', '.');\r\n    if (!normalized) return undefined;\r\n    const parsed = parseFloat(normalized);\r\n    if (!Number.isFinite(parsed)) return undefined;\r\n    return Math.max(0, Math.round(parsed));\r\n};\r\n\r\nexport const mapStatusAnswer = (value: string): ProductStatus | undefined => {\r\n    const normalized = value.trim().toLowerCase();\r\n    if (!normalized) return undefined;\r\n    if (normalized.includes('borrador') || normalized.includes('draft')) return 'draft';\r\n    if (normalized.includes('pend')) return 'pending';\r\n    if (normalized.includes('priv')) return 'private';\r\n    const sanitized = normalized.replace(/[^a-záéíóúüñ\\s]/g, ' ');\r\n    const tokens = sanitized.split(/\\s+/).filter(Boolean);\r\n    if (\r\n        normalized.includes('public') ||\r\n        normalized.includes('activar') ||\r\n        tokens.includes('si') ||\r\n        tokens.includes('sí')\r\n    ) {\r\n        return 'publish';\r\n    }\r\n    return undefined;\r\n};\r\n\r\nexport const parseShippingDetails = (raw: string): ShippingInfo => {\r\n    if (!raw.trim()) return {};\r\n\r\n    const toNumber = (input: string): number | undefined => {\r\n        const normalized = input.replace(/[^0-9.,-]/g, '').replace(',', '.');\r\n        if (!normalized) return undefined;\r\n        const parsed = parseFloat(normalized);\r\n        return Number.isFinite(parsed) ? parsed : undefined;\r\n    };\r\n\r\n    const formatNumber = (value: number): string => {\r\n        const rounded = Math.round(value * 1000) / 1000;\r\n        return Number.isInteger(rounded) ? String(rounded) : rounded.toString();\r\n    };\r\n\r\n    const weightMatch = raw.match(/peso\\s*: ?([\\d.,]+)\\s*([a-zA-Z]*)/i) || raw.match(/weight\\s*: ?([\\d.,]+)\\s*([a-zA-Z]*)/i);\r\n    let weight: string | undefined;\r\n    if (weightMatch) {\r\n        const amount = toNumber(weightMatch[1]);\r\n        if (amount !== undefined) {\r\n            const unit = (weightMatch[2] || '').toLowerCase();\r\n            if (unit.startsWith('g')) {\r\n                weight = formatNumber(amount / 1000);\r\n            } else {\r\n                weight = formatNumber(amount);\r\n            }\r\n        }\r\n    }\r\n\r\n    const dimensions: ShippingDimensions = {};\r\n    const dimensionPattern = raw.match(/dimensiones?\\s*: ?([\\d.,]+)\\s*[xX]\\s*([\\d.,]+)\\s*[xX]\\s*([\\d.,]+)/);\r\n\r\n    if (dimensionPattern) {\r\n        const lengthValue = toNumber(dimensionPattern[1]);\r\n        const widthValue = toNumber(dimensionPattern[2]);\r\n        const heightValue = toNumber(dimensionPattern[3]);\r\n        if (lengthValue !== undefined) dimensions.length = formatNumber(lengthValue);\r\n        if (widthValue !== undefined) dimensions.width = formatNumber(widthValue);\r\n        if (heightValue !== undefined) dimensions.height = formatNumber(heightValue);\r\n    } else {\r\n        const lengthMatch = raw.match(/(largo|longitud|length)\\s*: ?([\\d.,]+)/i);\r\n        const widthMatch = raw.match(/(ancho|width)\\s*: ?([\\d.,]+)/i);\r\n        const heightMatch = raw.match(/(alto|altura|height)\\s*: ?([\\d.,]+)/i);\r\n\r\n        if (lengthMatch) {\r\n            const value = toNumber(lengthMatch[2]);\r\n            if (value !== undefined) dimensions.length = formatNumber(value);\r\n        }\r\n        if (widthMatch) {\r\n            const value = toNumber(widthMatch[2]);\r\n            if (value !== undefined) dimensions.width = formatNumber(value);\r\n        }\r\n        if (heightMatch) {\r\n            const value = toNumber(heightMatch[2]);\r\n            if (value !== undefined) dimensions.height = formatNumber(value);\r\n        }\r\n    }\r\n\r\n    const hasDimensions = Object.values(dimensions).some(Boolean);\r\n\r\n    return {\r\n        weight,\r\n        dimensions: hasDimensions ? dimensions : undefined,\r\n    };\r\n};\r\n\r\nexport const parseAttributesInput = (raw: string): AttributeOverride[] => {\r\n    if (!raw.trim()) return [];\r\n\r\n    const segments = raw\r\n        .split(/[\\n;]+/)\r\n        .flatMap((segment) => segment.split(','))\r\n        .map((segment) => segment.trim())\r\n        .filter((segment) => segment.length > 0);\r\n\r\n    const attributesMap = new Map<string, AttributeOverride>();\r\n\r\n    segments.forEach((segment) => {\r\n        const [rawName, rawValue] = segment.split(/[:=|-]/).map((part) => part.trim());\r\n        if (!rawName || !rawValue) return;\r\n\r\n        const key = rawName.toLowerCase();\r\n        if (!attributesMap.has(key)) {\r\n            attributesMap.set(key, {\r\n                name: rawName,\r\n                value: rawValue,\r\n                visible: true,\r\n                variation: false,\r\n            });\r\n        }\r\n    });\r\n\r\n    return Array.from(attributesMap.values());\r\n};\r\n\r\nexport const normalizeProductResult = (payload: any) => {\r\n    if (!payload?.product) return payload;\r\n\r\n    const product = payload.product;\r\n    const normalizedCategories = Array.isArray(product.categories)\r\n        ? product.categories\r\n        : splitInputList(String(product.categories ?? ''), { allowHierarchy: true });\r\n    const normalizedTags = Array.isArray(product.tags)\r\n        ? product.tags\r\n        : splitInputList(String(product.tags ?? ''));\r\n    const normalizedImages = Array.isArray(product.images)\r\n        ? product.images\r\n        : splitInputList(String(product.images ?? ''));\r\n    const parsedStock = typeof product.stock_quantity === 'number'\r\n        ? product.stock_quantity\r\n        : parseStockQuantity(String(product.stock_quantity ?? ''));\r\n\r\n    return {\r\n        ...payload,\r\n        product: {\r\n            ...product,\r\n            categories: normalizedCategories,\r\n            tags: normalizedTags,\r\n            images: normalizedImages,\r\n            stock_quantity: parsedStock ?? undefined,\r\n            attributes: Array.isArray(product.attributes) ? product.attributes : [],\r\n        },\r\n    };\r\n};\r\n"],"names":[],"mappings":"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"}